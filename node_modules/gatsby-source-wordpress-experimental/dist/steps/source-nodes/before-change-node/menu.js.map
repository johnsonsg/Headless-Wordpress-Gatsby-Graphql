{"version":3,"sources":["../../../../src/steps/source-nodes/before-change-node/menu.js"],"names":["deleteMenuNodeChildMenuItems","node","pluginOptions","helpers","getNodesByType","actions","allMenuItems","schema","typePrefix","allMenuItemsNodesWithThisMenuIdAsAParent","filter","menuItemNode","menu","id","forEach","deleteNode","menuBeforeChangeNode","api","remoteNode","actionType"],"mappings":";;;;;AAAA;;AAEA,MAAMA,4BAA4B,GAAIC,IAAD,IAAU;AAC7C,QAAM;AACJC,IAAAA,aADI;AAEJC,IAAAA,OAAO,EAAE;AAAEC,MAAAA,cAAF;AAAkBC,MAAAA;AAAlB;AAFL,MAGF,iCAHJ;AAKA,QAAMC,YAAY,GAAGF,cAAc,CAChC,GAAEF,aAAa,CAACK,MAAd,CAAqBC,UAAW,UADF,CAAnC;AAIA,QAAMC,wCAAwC,GAAGH,YAAY,CAACI,MAAb,CAC9CC,YAAD,IAAkBA,YAAY,CAACC,IAAb,CAAkBX,IAAlB,CAAuBY,EAAvB,KAA8BZ,IAAI,CAACY,EADN,CAAjD;AAIAJ,EAAAA,wCAAwC,SAAxC,IAAAA,wCAAwC,WAAxC,YAAAA,wCAAwC,CAAEK,OAA1C,CAAmDH,YAAD,IAChDN,OAAO,CAACU,UAAR,CAAmB;AACjBd,IAAAA,IAAI,EAAEU;AADW,GAAnB,CADF;AAKD,CAnBD;;AAqBO,MAAMK,oBAAoB,GAAG,MAAOC,GAAP,IAAe;AACjD,MAAIA,GAAG,CAACC,UAAJ,IAAkBD,GAAG,CAACE,UAAJ,KAAoB,QAA1C,EAAmD;AACjD;AACA,WAAOnB,4BAA4B,CAACiB,GAAG,CAACC,UAAL,CAAnC;AACD;AACF,CALM","sourcesContent":["import { getGatsbyApi } from \"~/utils/get-gatsby-api\"\n\nconst deleteMenuNodeChildMenuItems = (node) => {\n  const {\n    pluginOptions,\n    helpers: { getNodesByType, actions },\n  } = getGatsbyApi()\n\n  const allMenuItems = getNodesByType(\n    `${pluginOptions.schema.typePrefix}MenuItem`\n  )\n\n  const allMenuItemsNodesWithThisMenuIdAsAParent = allMenuItems.filter(\n    (menuItemNode) => menuItemNode.menu.node.id === node.id\n  )\n\n  allMenuItemsNodesWithThisMenuIdAsAParent?.forEach((menuItemNode) =>\n    actions.deleteNode({\n      node: menuItemNode,\n    })\n  )\n}\n\nexport const menuBeforeChangeNode = async (api) => {\n  if (api.remoteNode && api.actionType === `DELETE`) {\n    // delete child menu items\n    return deleteMenuNodeChildMenuItems(api.remoteNode)\n  }\n}\n"],"file":"menu.js"}